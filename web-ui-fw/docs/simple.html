<!DOCTYPE html>  <html> <head>   <title>simple.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               simple.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * This software is licensed under the MIT licence (as defined by the OSI at</span>
<span class="cm"> * http://www.opensource.org/licenses/mit-license.php)</span>
<span class="cm"> * </span>
<span class="cm"> * ***************************************************************************</span>
<span class="cm"> * Copyright (C) 2011 by Intel Corporation Ltd.</span>
<span class="cm"> * </span>
<span class="cm"> * Permission is hereby granted, free of charge, to any person obtaining a</span>
<span class="cm"> * copy of this software and associated documentation files (the &quot;Software&quot;),</span>
<span class="cm"> * to deal in the Software without restriction, including without limitation</span>
<span class="cm"> * the rights to use, copy, modify, merge, publish, distribute, sublicense,</span>
<span class="cm"> * and/or sell copies of the Software, and to permit persons to whom the</span>
<span class="cm"> * Software is furnished to do so, subject to the following conditions:</span>
<span class="cm"> * </span>
<span class="cm"> * The above copyright notice and this permission notice shall be included in</span>
<span class="cm"> * all copies or substantial portions of the Software.</span>
<span class="cm"> * </span>
<span class="cm"> * THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span>
<span class="cm"> * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span>
<span class="cm"> * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span>
<span class="cm"> * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span>
<span class="cm"> * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING</span>
<span class="cm"> * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span>
<span class="cm"> * DEALINGS IN THE SOFTWARE.</span>
<span class="cm"> * ***************************************************************************</span>
<span class="cm"> *</span>
<span class="cm"> * Authors: Elliot Smith &lt;elliot.smith@intel.com&gt;</span>
<span class="cm"> *          Salvatore Iovene &lt;salvatore.iovene@intel.com</span>
<span class="cm"> */</span>

<span class="p">(</span><span class="kd">function</span> <span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="kc">undefined</span><span class="p">)</span> <span class="p">{</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">widget</span><span class="p">(</span><span class="s2">&quot;mobile.simple&quot;</span><span class="p">,</span> <span class="nx">$</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">widget</span><span class="p">,</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The <code>options</code> are a way to store widget specific settings.
Technically, this is nothing more than a dictionary can be accessed
globally throughout the widget's scope.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">options</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>The <code>initSelector</code> is used at the bottom of this file, when we
actually bind any HTML element that contains the attribute
<code>data-role="simple"</code> to this widget.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">initSelector</span><span class="o">:</span> <span class="s2">&quot;:jqmData(role=&#39;simple&#39;)&quot;</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>We want to let the user specify a theme for this widget. See:
http://jquerymobile.com/demos/1.0/docs/api/themes.html</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">theme</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>To demostrate some methods implemented when writing a JQM widget,
we're adding a number that increases by one regularly. The
following setting is the interval of time between updates.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">updateInterval</span><span class="o">:</span> <span class="mi">1000</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Let's store here some constants for aid.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_constants</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">status_stopped</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nx">status_running</span><span class="o">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nx">startstop_class</span><span class="o">:</span> <span class="s1">&#39;startstopbtn&#39;</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Sometimes there are variables that you will need all over your widget,
and for that you can use a <code>_data</code> dictionary (although it can be
named whatever you want.)
It really is nothing but a big global container, but we don't want to
pollute <code>options</code> with things that are not settings.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_data</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>We store our timer here, because we will need to clear it later.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">timer</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>We store the status of our timer here (stopped or running).</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">status</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>We use this function to change the text on the Start/Stop counter
button when the status changes.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_setButtonText</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="nx">text</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$span</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span>
            <span class="s1">&#39;a.&#39;</span> <span class="o">+</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_constants</span><span class="p">.</span><span class="nx">startstop_class</span> <span class="o">+</span> <span class="s1">&#39; span.ui-btn-text&#39;</span><span class="p">)</span>
        <span class="nx">$span</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">text</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>This will reset the number to its initial value.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>Let's start with 0.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">$number</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.number&#39;</span><span class="p">)</span>
        <span class="nx">$number</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>This is the function that will increase our number.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_increaseNumber</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">$number</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;.number&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Let's get and increse the number.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">value</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">$number</span><span class="p">.</span><span class="nx">text</span><span class="p">());</span>
        <span class="nx">$number</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">value</span> <span class="o">+</span> <span class="mi">1</span><span class="p">);</span>

        <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>This will start our timer.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">timer</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span>
            <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_increaseNumber</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">},</span>
            <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">updateInterval</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_constants</span><span class="p">.</span><span class="nx">status_running</span><span class="p">;</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_setButtonText</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="s2">&quot;Stop counter&quot;</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>This will stop our timer.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_stop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">self</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">timer</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">status</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_constants</span><span class="p">.</span><span class="nx">status_stopped</span><span class="p">;</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">_setButtonText</span><span class="p">(</span><span class="nx">self</span><span class="p">,</span> <span class="s2">&quot;Start counter&quot;</span><span class="p">);</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>The <code>_create</code> method is called when the widget is created. This is the
place in which the following tasks are usually performed:
* Initialization of settings
* Creation and initialization of DOM elements
* Any other code that should be run at the beginning of the life cycle
  of the widget.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>We store <code>this</code> in a variable because we will need it later in
callbacks functions, when <code>this</code> will be something else.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>We need the page so that we can bind actions to the page being
shown or closed.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">page</span> <span class="o">=</span> <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">closest</span><span class="p">(</span><span class="s1">&#39;.ui-page&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p><code>this.element</code> is the element to which our <code>options.initSelector</code>
is applied in the HTML code. Here we're starting to add some more
HTML to it.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span>
            <span class="s1">&#39;&lt;p&gt;This is the Simple Widget. It can be used as a starting &#39;</span> <span class="o">+</span>
            <span class="s1">&#39;point or learning aid for building new JQM widgets.&lt;/p&gt;&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>For the purposes of this widget, we will here add some text that
contains a number that we will increase regularly, with a timer.
We will use the <code>updateInterval</code> setting defined in <code>options</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">$number</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;span class=&quot;number&quot;&gt;&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Here we style our number a little.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">$number</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
            <span class="s1">&#39;text-align&#39;</span> <span class="o">:</span> <span class="s1">&#39;center&#39;</span><span class="p">,</span>
            <span class="s1">&#39;font-size&#39;</span>  <span class="o">:</span> <span class="s1">&#39;2em&#39;</span><span class="p">,</span>
            <span class="s1">&#39;font-weight&#39;</span><span class="o">:</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span>
            <span class="s1">&#39;display&#39;</span>    <span class="o">:</span> <span class="s1">&#39;block&#39;</span><span class="p">,</span>
            <span class="s1">&#39;line-height&#39;</span><span class="o">:</span> <span class="s1">&#39;2em&#39;</span>
        <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Let's also add it to the DOM.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$number</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Let's add a button that starts the timer, and theme it correctly.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">$button</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&quot;#&quot;&gt;Start counter&lt;/a&gt;&#39;</span><span class="p">);</span>
        <span class="nx">$button</span><span class="p">.</span><span class="nx">buttonMarkup</span><span class="p">({</span><span class="nx">theme</span><span class="o">:</span> <span class="nx">self</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">theme</span><span class="p">});</span>
        <span class="nx">$button</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_constants</span><span class="p">.</span><span class="nx">startstop_class</span><span class="p">);</span>
        <span class="nx">$button</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">ns</span> <span class="o">||</span> <span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;role&#39;</span><span class="p">,</span> <span class="s1">&#39;button&#39;</span><span class="p">);</span>
        <span class="nx">self</span><span class="p">.</span><span class="nx">element</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">$button</span><span class="p">);</span>

        <span class="nx">$button</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;vclick&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Timer is not running, let's start it.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">self</span><span class="p">.</span><span class="nx">_start</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Timer is running, let's stop it.</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="nx">self</span><span class="p">.</span><span class="nx">_stop</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">}</span>

            <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span> 
        <span class="p">});</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">page</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Before the animation for hiding the page starts, let's stop
the timeout.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">page</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;pagebeforehide&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">_stop</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>After the animation for hiding the page ends, we can reset the
number to 0. We didn't do it in <code>pagebeforehide</code> because we
didn't want the user to see the number change to zero before
their eyes.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">page</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;pagehide&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">_reset</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Each time the page is shown, we start over.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nx">page</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;pageshow&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
                <span class="nx">self</span><span class="p">.</span><span class="nx">_reset</span><span class="p">(</span><span class="nx">self</span><span class="p">);</span>
            <span class="p">});</span>
        <span class="p">}</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>The <code>_destroy</code> method is the place in which you should release and
reset the things you've used.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_destroy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Let's remove the HTML we have created, so everything is created
from scratch when we start again.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">this</span><span class="p">.</span><span class="nx">html</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
    <span class="p">},</span>

    <span class="nx">_setOption</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nx">value</span> <span class="o">!==</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span> <span class="p">{</span>
            <span class="k">switch</span> <span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">case</span> <span class="s1">&#39;updateInterval&#39;</span><span class="o">:</span>
                <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">updateInterval</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
                <span class="k">break</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">refresh</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>This method updates the widget to reflect the changes that have
happened outside of our control. In this case, we're going to imagine
that a user changed our <code>updateInterval</code>. If that happens, we can
reset our timer.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">refresh</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_data</span><span class="p">.</span><span class="nx">status</span> <span class="o">==</span> <span class="k">this</span><span class="p">.</span><span class="nx">_constants</span><span class="p">.</span><span class="nx">status_running</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_stop</span><span class="p">();</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">_start</span><span class="p">();</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s2">&quot;pagecreate create&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="nx">$</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">simple</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">initSelector</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">simple</span><span class="p">();</span>
<span class="p">});</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">);</span>

<span class="cm">/* vim:ft=javascript.jquery:ai:et:sw=4:ts=4:</span>
<span class="cm"> */</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 