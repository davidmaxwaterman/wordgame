<!DOCTYPE html>  <html> <head>   <title>jquery.mobile.scrollview.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               jquery.mobile.scrollview.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="cm">/*</span>
<span class="cm">* jQuery Mobile Framework : scrollview plugin</span>
<span class="cm">* Copyright (c) 2010 Adobe Systems Incorporated - Kin Blas (jblas@adobe.com)</span>
<span class="cm">* Dual licensed under the MIT (MIT-LICENSE.txt) and GPL (GPL-LICENSE.txt) licenses.</span>
<span class="cm">* Note: Code is in draft form and is subject to change</span>
<span class="cm">*/</span>
<span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">,</span><span class="kc">undefined</span><span class="p">){</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">widget</span><span class="p">(</span> <span class="s2">&quot;mobile.scrollview&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">widget</span><span class="p">,</span> <span class="p">{</span>
	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">fps</span><span class="o">:</span>               <span class="mi">60</span><span class="p">,</span>    <span class="c1">// Frames per second in msecs.</span>
		<span class="nx">direction</span><span class="o">:</span>         <span class="kc">null</span><span class="p">,</span>  <span class="c1">// &quot;x&quot;, &quot;y&quot;, or null for both.</span>

		<span class="nx">scrollDuration</span><span class="o">:</span>    <span class="mi">2000</span><span class="p">,</span>  <span class="c1">// Duration of the scrolling animation in msecs.</span>
		<span class="nx">overshootDuration</span><span class="o">:</span> <span class="mi">250</span><span class="p">,</span>   <span class="c1">// Duration of the overshoot animation in msecs.</span>
		<span class="nx">snapbackDuration</span><span class="o">:</span>  <span class="mi">500</span><span class="p">,</span>   <span class="c1">// Duration of the snapback animation in msecs.</span>

		<span class="nx">moveThreshold</span><span class="o">:</span>     <span class="mi">10</span><span class="p">,</span>   <span class="c1">// User must move this many pixels in any direction to trigger a scroll.</span>
		<span class="nx">moveIntervalThreshold</span><span class="o">:</span>     <span class="mi">150</span><span class="p">,</span>   <span class="c1">// Time between mousemoves must not exceed this threshold.</span>

		<span class="nx">scrollMethod</span><span class="o">:</span>      <span class="s2">&quot;translate&quot;</span><span class="p">,</span>  <span class="c1">// &quot;translate&quot;, &quot;position&quot;, &quot;scroll&quot;</span>

		<span class="nx">startEventName</span><span class="o">:</span>    <span class="s2">&quot;scrollstart&quot;</span><span class="p">,</span>
		<span class="nx">updateEventName</span><span class="o">:</span>   <span class="s2">&quot;scrollupdate&quot;</span><span class="p">,</span>
		<span class="nx">stopEventName</span><span class="o">:</span>     <span class="s2">&quot;scrollstop&quot;</span><span class="p">,</span>

		<span class="nx">eventType</span><span class="o">:</span>         <span class="nx">$</span><span class="p">.</span><span class="nx">support</span><span class="p">.</span><span class="nx">touch</span> <span class="o">?</span> <span class="s2">&quot;touch&quot;</span> <span class="o">:</span> <span class="s2">&quot;mouse&quot;</span><span class="p">,</span>

		<span class="nx">showScrollBars</span><span class="o">:</span>    <span class="kc">true</span><span class="p">,</span>

		<span class="nx">pagingEnabled</span><span class="o">:</span>     <span class="kc">false</span><span class="p">,</span>
		<span class="nx">delayedClickSelector</span><span class="o">:</span> <span class="s2">&quot;a,input,textarea,select,button,.ui-btn&quot;</span><span class="p">,</span>
		<span class="nx">delayedClickEnabled</span><span class="o">:</span> <span class="kc">false</span>
	<span class="p">},</span>

	<span class="nx">_makePositioned</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">$ele</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">$ele</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;static&quot;</span><span class="p">)</span>
			<span class="nx">$ele</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;position&quot;</span><span class="p">,</span> <span class="s2">&quot;relative&quot;</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">_create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">element</span><span class="p">).</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-scrollview-clip&quot;</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">$child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">children</span><span class="p">();</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">$child</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
			<span class="nx">$child</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">wrapInner</span><span class="p">(</span><span class="s2">&quot;&lt;div&gt;&lt;/div&gt;&quot;</span><span class="p">).</span><span class="nx">children</span><span class="p">();</span>
		<span class="p">}</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_$view</span> <span class="o">=</span> <span class="nx">$child</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="s2">&quot;ui-scrollview-view&quot;</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;overflow&quot;</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">scrollMethod</span> <span class="o">===</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">?</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">:</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_makePositioned</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;overflow&quot;</span><span class="p">,</span> <span class="s2">&quot;hidden&quot;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>Turn off our faux scrollbars if we are using native scrolling
to position the view.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showScrollBars</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">scrollMethod</span> <span class="o">===</span> <span class="s2">&quot;scroll&quot;</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showScrollBars</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>We really don't need this if we are using a translate transformation
for scrolling. We set it just in case the user wants to switch methods
on the fly.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">_makePositioned</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="mi">0</span> <span class="p">});</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_sx</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_sy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">direction</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span> <span class="o">=</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">!==</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>   <span class="o">?</span> <span class="k">new</span> <span class="nx">MomentumTracker</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span> <span class="o">=</span> <span class="p">(</span><span class="nx">direction</span> <span class="o">!==</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span> <span class="o">?</span> <span class="k">new</span> <span class="nx">MomentumTracker</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_timerInterval</span> <span class="o">=</span> <span class="mi">1000</span><span class="o">/</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">fps</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_timerCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleMomentumScroll</span><span class="p">();</span> <span class="p">};</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_addBehaviors</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="nx">_startMScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">speedX</span><span class="p">,</span> <span class="nx">speedY</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_showScrollBars</span><span class="p">();</span>

		<span class="kd">var</span> <span class="nx">keepGoing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">duration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">scrollDuration</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">startEventName</span><span class="p">);</span>

		<span class="kd">var</span> <span class="nx">ht</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">ht</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
			<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">width</span><span class="p">();</span>
			<span class="nx">ht</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">,</span> <span class="nx">speedX</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="p">(</span><span class="nx">v</span> <span class="o">&gt;</span> <span class="nx">c</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="p">(</span><span class="nx">v</span> <span class="o">-</span> <span class="nx">c</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="nx">keepGoing</span> <span class="o">=</span> <span class="o">!</span><span class="nx">ht</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">vt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">vt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
			<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">height</span><span class="p">();</span>
			<span class="nx">vt</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">,</span> <span class="nx">speedY</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="p">(</span><span class="nx">v</span> <span class="o">&gt;</span> <span class="nx">c</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="p">(</span><span class="nx">v</span> <span class="o">-</span> <span class="nx">c</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="nx">keepGoing</span> <span class="o">=</span> <span class="nx">keepGoing</span> <span class="o">||</span> <span class="o">!</span><span class="nx">vt</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">keepGoing</span><span class="p">)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timerCB</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timerInterval</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="nx">_stopMScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">stopEventName</span><span class="p">);</span>
			<span class="nx">clearTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_hideScrollBars</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="nx">_handleMomentumScroll</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">keepGoing</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">vt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">vt</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">vt</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
			<span class="nx">y</span> <span class="o">=</span> <span class="nx">vt</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">();</span>
			<span class="nx">keepGoing</span> <span class="o">=</span> <span class="o">!</span><span class="nx">vt</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">ht</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">ht</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">ht</span><span class="p">.</span><span class="nx">update</span><span class="p">();</span>
			<span class="nx">x</span> <span class="o">=</span> <span class="nx">ht</span><span class="p">.</span><span class="nx">getPosition</span><span class="p">();</span>
			<span class="nx">keepGoing</span> <span class="o">=</span> <span class="nx">keepGoing</span> <span class="o">||</span> <span class="o">!</span><span class="nx">ht</span><span class="p">.</span><span class="nx">done</span><span class="p">();</span>
		<span class="p">}</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">updateEventName</span><span class="p">,</span> <span class="p">[</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="nx">y</span> <span class="p">}</span> <span class="p">]);</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">keepGoing</span><span class="p">)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_timerCB</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timerInterval</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="nx">_setScrollPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_sx</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_sy</span> <span class="o">=</span> <span class="nx">y</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">$v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">sm</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">scrollMethod</span><span class="p">;</span>

		<span class="k">switch</span> <span class="p">(</span><span class="nx">sm</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">case</span> <span class="s2">&quot;translate&quot;</span><span class="o">:</span>
				<span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$v</span><span class="p">,</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="s2">&quot;position&quot;</span><span class="o">:</span>
				<span class="nx">$v</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span><span class="nx">left</span><span class="o">:</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="nx">top</span><span class="o">:</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">});</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="k">case</span> <span class="s2">&quot;scroll&quot;</span><span class="o">:</span>
				<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
				<span class="nx">c</span><span class="p">.</span><span class="nx">scrollLeft</span> <span class="o">=</span> <span class="o">-</span><span class="nx">x</span><span class="p">;</span>
				<span class="nx">c</span><span class="p">.</span><span class="nx">scrollTop</span> <span class="o">=</span> <span class="o">-</span><span class="nx">y</span><span class="p">;</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">$vsb</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">$hsb</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">$vsb</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">$sbt</span> <span class="o">=</span> <span class="nx">$vsb</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-thumb&quot;</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">sm</span> <span class="o">===</span> <span class="s2">&quot;translate&quot;</span><span class="p">)</span>
				<span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$sbt</span><span class="p">,</span> <span class="s2">&quot;0px&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">y</span><span class="o">/</span><span class="nx">$v</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span> <span class="o">*</span> <span class="nx">$sbt</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">height</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="nx">$sbt</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;top&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">y</span><span class="o">/</span><span class="nx">$v</span><span class="p">.</span><span class="nx">height</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">$hsb</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">$sbt</span> <span class="o">=</span> <span class="nx">$hsb</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-thumb&quot;</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">sm</span> <span class="o">===</span> <span class="s2">&quot;translate&quot;</span><span class="p">)</span>
				<span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$sbt</span><span class="p">,</span>  <span class="o">-</span><span class="nx">x</span><span class="o">/</span><span class="nx">$v</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span> <span class="o">*</span> <span class="nx">$sbt</span><span class="p">.</span><span class="nx">parent</span><span class="p">().</span><span class="nx">width</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;0px&quot;</span><span class="p">);</span>
			<span class="k">else</span>
				<span class="nx">$sbt</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;left&quot;</span><span class="p">,</span> <span class="o">-</span><span class="nx">x</span><span class="o">/</span><span class="nx">$v</span><span class="p">.</span><span class="nx">width</span><span class="p">()</span><span class="o">*</span><span class="mi">100</span> <span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">);</span>
		<span class="p">}</span>
	<span class="p">},</span>

	<span class="nx">scrollTo</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="nx">duration</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span>
		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">duration</span><span class="p">)</span>
			<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

		<span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="nx">x</span><span class="p">;</span>
		<span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">y</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">start</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>
		<span class="kd">var</span> <span class="nx">efunc</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span><span class="s2">&quot;easeOutQuad&quot;</span><span class="p">];</span>
		<span class="kd">var</span> <span class="nx">sx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">sy</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">-</span> <span class="nx">sx</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">sy</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">tfunc</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
			<span class="kd">var</span> <span class="nx">elapsed</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">()</span> <span class="o">-</span> <span class="nx">start</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">elapsed</span> <span class="o">&gt;=</span> <span class="nx">duration</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nx">self</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="nx">self</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="kd">var</span> <span class="nx">ec</span> <span class="o">=</span> <span class="nx">efunc</span><span class="p">(</span><span class="nx">elapsed</span><span class="o">/</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">duration</span><span class="p">);</span>
				<span class="nx">self</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">sx</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dx</span> <span class="o">*</span> <span class="nx">ec</span><span class="p">),</span> <span class="nx">sy</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dy</span> <span class="o">*</span> <span class="nx">ec</span><span class="p">));</span>
				<span class="nx">self</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">tfunc</span><span class="p">,</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_timerInterval</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">};</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_timerID</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="nx">tfunc</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_timerInterval</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">getScrollPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">return</span> <span class="p">{</span> <span class="nx">x</span><span class="o">:</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">,</span> <span class="nx">y</span><span class="o">:</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_sy</span> <span class="p">};</span>
	<span class="p">},</span>

	<span class="nx">_getScrollHierarchy</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">svh</span> <span class="o">=</span> <span class="p">[];</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">.</span><span class="nx">parents</span><span class="p">(</span><span class="s2">&quot;.ui-scrollview-clip&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
			<span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nx">jqmData</span><span class="p">(</span><span class="s2">&quot;scrollview&quot;</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="nx">svh</span><span class="p">.</span><span class="nx">unshift</span><span class="p">(</span><span class="nx">d</span><span class="p">);</span>
		<span class="p">});</span>
		<span class="k">return</span> <span class="nx">svh</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_getAncestorByDirection</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">dir</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">svh</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getScrollHierarchy</span><span class="p">();</span>
		<span class="kd">var</span> <span class="nx">n</span> <span class="o">=</span> <span class="nx">svh</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
		<span class="k">while</span> <span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span> <span class="nx">n</span><span class="o">--</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">sv</span> <span class="o">=</span> <span class="nx">svh</span><span class="p">[</span><span class="nx">n</span><span class="p">];</span>
			<span class="kd">var</span> <span class="nx">svdir</span> <span class="o">=</span> <span class="nx">sv</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">svdir</span> <span class="o">||</span> <span class="nx">svdir</span> <span class="o">==</span> <span class="nx">dir</span><span class="p">)</span>
				<span class="k">return</span> <span class="nx">sv</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_handleDragStart</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">)</span>
	<span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Stop any scrolling of elements in our parent hierarcy.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_getScrollHierarchy</span><span class="p">(),</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span><span class="nx">sv</span><span class="p">){</span> <span class="nx">sv</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span> <span class="p">});</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_stopMScroll</span><span class="p">();</span>

		<span class="kd">var</span> <span class="nx">c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delayedClickEnabled</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_$clickEle</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">closest</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delayedClickSelector</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastX</span> <span class="o">=</span> <span class="nx">ex</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastY</span> <span class="o">=</span> <span class="nx">ey</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_speedX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_speedY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_didDrag</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">cw</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">vw</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_maxX</span> <span class="o">=</span> <span class="nx">cw</span> <span class="o">-</span> <span class="nx">vw</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_maxX</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxX</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">)</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-thumb&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">cw</span> <span class="o">&gt;=</span> <span class="nx">vw</span> <span class="o">?</span> <span class="s2">&quot;100%&quot;</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">cw</span><span class="o">/</span><span class="nx">vw</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">));</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">ch</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">c</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">vh</span> <span class="o">=</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">v</span><span class="p">.</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span> <span class="mi">10</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_maxY</span> <span class="o">=</span> <span class="nx">ch</span> <span class="o">-</span> <span class="nx">vh</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_maxY</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxY</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">)</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-thumb&quot;</span><span class="p">).</span><span class="nx">css</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="p">(</span><span class="nx">ch</span> <span class="o">&gt;=</span> <span class="nx">vh</span> <span class="o">?</span> <span class="s2">&quot;100%&quot;</span> <span class="o">:</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">floor</span><span class="p">(</span><span class="nx">ch</span><span class="o">/</span><span class="nx">vh</span><span class="o">*</span><span class="mi">100</span><span class="p">)</span><span class="o">+</span> <span class="s2">&quot;%&quot;</span><span class="p">));</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">svdir</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_pageDelta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_pageSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pagingEnabled</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">||</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;y&quot;</span><span class="p">))</span>
		<span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_pageSize</span> <span class="o">=</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">?</span> <span class="nx">cw</span> <span class="o">:</span> <span class="nx">ch</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">=</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sx</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">-=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">%</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pageSize</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastMove</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_enableTracking</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>If we're using mouse events, we need to prevent the default
behavior to suppress accidental selection of text, etc. We
can't do this on touch devices because it will disable the
generation of "click" events.</p>

<p>XXX: We should test if this has an effect on links! - kin
XXX: It does affect links, and other input elements, if they
     occur inside a scrollview; so make sure the event
     occurred on something other than an input element or a link
     before preventing its default</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">==</span> <span class="s2">&quot;mouse&quot;</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delayedClickEnabled</span><span class="p">)</span> <span class="p">{</span>
			<span class="kd">var</span> <span class="nx">isLinkOrInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;a, :input&#39;</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">isInsideLinkOrInput</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">parents</span><span class="p">(</span><span class="s1">&#39;a, :input&#39;</span><span class="p">).</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">shouldBlockEvent</span> <span class="o">=</span> <span class="o">!</span><span class="p">(</span><span class="nx">isLinkOrInput</span> <span class="o">||</span> <span class="nx">isInsideLinkOrInput</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">shouldBlockEvent</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="nx">e</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>

	<span class="p">},</span>

	<span class="nx">_propagateDragMove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">sv</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">,</span> <span class="nx">dir</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_hideScrollBars</span><span class="p">();</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_disableTracking</span><span class="p">();</span>
		<span class="nx">sv</span><span class="p">.</span><span class="nx">_handleDragStart</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span><span class="nx">ex</span><span class="p">,</span><span class="nx">ey</span><span class="p">);</span>
		<span class="nx">sv</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">=</span> <span class="nx">dir</span><span class="p">;</span>
		<span class="nx">sv</span><span class="p">.</span><span class="nx">_didDrag</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_didDrag</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_handleDragMove</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastMove</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>

		<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="nx">ex</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastX</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">dy</span> <span class="o">=</span> <span class="nx">ey</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastY</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">svdir</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">dx</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="nb">Math</span><span class="p">.</span><span class="nx">abs</span><span class="p">(</span><span class="nx">dy</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">mt</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">moveThreshold</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">mt</span> <span class="o">&amp;&amp;</span> <span class="nx">y</span> <span class="o">&lt;</span> <span class="nx">mt</span><span class="p">)</span> <span class="p">{</span>
				<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">r</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">x</span><span class="o">/</span><span class="nx">y</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">dir</span> <span class="o">=</span> <span class="s2">&quot;y&quot;</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&gt;</span> <span class="nx">y</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">y</span><span class="o">/</span><span class="nx">x</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">dir</span> <span class="o">=</span> <span class="s2">&quot;x&quot;</span><span class="p">;</span>
			<span class="p">}</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">svdir</span> <span class="o">&amp;&amp;</span> <span class="nx">dir</span> <span class="o">&amp;&amp;</span> <span class="nx">svdir</span> <span class="o">!=</span> <span class="nx">dir</span><span class="p">)</span>
			<span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>This scrollview can't handle the direction the user
is attempting to scroll. Find an ancestor scrollview
that can handle the request.</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="kd">var</span> <span class="nx">sv</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getAncestorByDirection</span><span class="p">(</span><span class="nx">dir</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">sv</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">_propagateDragMove</span><span class="p">(</span><span class="nx">sv</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">,</span> <span class="nx">dir</span><span class="p">);</span>
					<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">=</span> <span class="nx">svdir</span> <span class="o">?</span> <span class="nx">svdir</span> <span class="o">:</span> <span class="p">(</span><span class="nx">dir</span> <span class="o">?</span> <span class="nx">dir</span> <span class="o">:</span> <span class="s2">&quot;none&quot;</span><span class="p">);</span>
		<span class="p">}</span>

		<span class="kd">var</span> <span class="nx">newX</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">newY</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">!==</span> <span class="s2">&quot;y&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_speedX</span> <span class="o">=</span> <span class="nx">dx</span><span class="p">;</span>
			<span class="nx">newX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Simulate resistance.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">newX</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">newX</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxX</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="kd">var</span> <span class="nx">sv</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getAncestorByDirection</span><span class="p">(</span><span class="s2">&quot;x&quot;</span><span class="p">);</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">sv</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="k">this</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">newX</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxX</span><span class="p">,</span> <span class="nx">newY</span><span class="p">);</span>
						<span class="k">this</span><span class="p">.</span><span class="nx">_propagateDragMove</span><span class="p">(</span><span class="nx">sv</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">,</span> <span class="nx">dir</span><span class="p">);</span>
						<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span>
				<span class="nx">newX</span> <span class="o">=</span> <span class="nx">x</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dx</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">!==</span> <span class="s2">&quot;x&quot;</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_speedY</span> <span class="o">=</span> <span class="nx">dy</span><span class="p">;</span>
			<span class="nx">newY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="nx">dy</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Simulate resistance.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">newY</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="nx">newY</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxY</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_directionLock</span> <span class="o">===</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="kd">var</span> <span class="nx">sv</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_getAncestorByDirection</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">);</span>
					<span class="k">if</span> <span class="p">(</span><span class="nx">sv</span><span class="p">)</span>
					<span class="p">{</span>
						<span class="k">this</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">newX</span><span class="p">,</span> <span class="nx">newY</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="mi">0</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">_maxY</span><span class="p">);</span>
						<span class="k">this</span><span class="p">.</span><span class="nx">_propagateDragMove</span><span class="p">(</span><span class="nx">sv</span><span class="p">,</span> <span class="nx">e</span><span class="p">,</span> <span class="nx">ex</span><span class="p">,</span> <span class="nx">ey</span><span class="p">,</span> <span class="nx">dir</span><span class="p">);</span>
						<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
					<span class="p">}</span>
				<span class="p">}</span>

				<span class="nx">newY</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">+</span> <span class="p">(</span><span class="nx">dy</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
			<span class="p">}</span>

		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pagingEnabled</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">||</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;y&quot;</span><span class="p">))</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">||</span> <span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span><span class="p">)</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_pageDelta</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
			<span class="k">else</span>
			<span class="p">{</span>
				<span class="kd">var</span> <span class="nx">opos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span><span class="p">;</span>
				<span class="kd">var</span> <span class="nx">cpos</span> <span class="o">=</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">?</span> <span class="nx">newX</span> <span class="o">:</span> <span class="nx">newY</span><span class="p">;</span>
				<span class="kd">var</span> <span class="nx">delta</span> <span class="o">=</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">?</span> <span class="nx">dx</span> <span class="o">:</span> <span class="nx">dy</span><span class="p">;</span>

				<span class="k">this</span><span class="p">.</span><span class="nx">_pageDelta</span> <span class="o">=</span> <span class="p">(</span><span class="nx">opos</span> <span class="o">&gt;</span> <span class="nx">cpos</span> <span class="o">&amp;&amp;</span> <span class="nx">delta</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pageSize</span> <span class="o">:</span> <span class="p">((</span><span class="nx">opos</span> <span class="o">&lt;</span> <span class="nx">cpos</span> <span class="o">&amp;&amp;</span> <span class="nx">delta</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_pageSize</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_didDrag</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastX</span> <span class="o">=</span> <span class="nx">ex</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastY</span> <span class="o">=</span> <span class="nx">ey</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">(</span><span class="nx">newX</span><span class="p">,</span> <span class="nx">newY</span><span class="p">);</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_showScrollBars</span><span class="p">();</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Call preventDefault() to prevent touch devices from
scrolling the main window.</p>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>e.preventDefault();</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="kc">false</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_handleDragStop</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">l</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastMove</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>
		<span class="kd">var</span> <span class="nx">doScroll</span> <span class="o">=</span> <span class="nx">l</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">t</span> <span class="o">-</span> <span class="nx">l</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">moveIntervalThreshold</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">sx</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_speedX</span> <span class="o">&amp;&amp;</span> <span class="nx">doScroll</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_speedX</span> <span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>
		<span class="kd">var</span> <span class="nx">sy</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_speedY</span> <span class="o">&amp;&amp;</span> <span class="nx">doScroll</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">_speedY</span> <span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span> <span class="o">?</span> <span class="mi">1</span> <span class="o">:</span> <span class="mi">0</span><span class="p">);</span>

		<span class="kd">var</span> <span class="nx">svdir</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">direction</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">pagingEnabled</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span> <span class="o">||</span> <span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackX</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_doSnapBackY</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sx</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">y</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_sy</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">svdir</span> <span class="o">===</span> <span class="s2">&quot;x&quot;</span><span class="p">)</span>
				<span class="nx">x</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pageDelta</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="k">this</span><span class="p">.</span><span class="nx">_pagePos</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">_pageDelta</span><span class="p">;</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">snapbackDuration</span><span class="p">);</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">sx</span> <span class="o">||</span> <span class="nx">sy</span><span class="p">)</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_startMScroll</span><span class="p">(</span><span class="nx">sx</span><span class="p">,</span> <span class="nx">sy</span><span class="p">);</span>
		<span class="k">else</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_hideScrollBars</span><span class="p">();</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_disableTracking</span><span class="p">();</span>

		<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">_didDrag</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">delayedClickEnabled</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clickEle</span><span class="p">.</span><span class="nx">length</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_$clickEle</span>
				<span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;mousedown&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>.trigger("focus")</p>             </td>             <td class="code">               <div class="highlight"><pre>				<span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;mouseup&quot;</span><span class="p">)</span>
				<span class="p">.</span><span class="nx">trigger</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">);</span>
		<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>If a view scrolled, then we need to absorb
the event so that links etc, underneath our
cursor/finger don't fire.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">_didDrag</span> <span class="o">?</span> <span class="kc">false</span> <span class="o">:</span> <span class="kc">undefined</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_enableTracking</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveEvt</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveCB</span><span class="p">);</span>
		<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dragStopEvt</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dragStopCB</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">_disableTracking</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveEvt</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveCB</span><span class="p">);</span>
		<span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">unbind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dragStopEvt</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dragStopCB</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">_showScrollBars</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">vclass</span> <span class="o">=</span> <span class="s2">&quot;ui-scrollbar-visible&quot;</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">vclass</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">.</span><span class="nx">addClass</span><span class="p">(</span><span class="nx">vclass</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">_hideScrollBars</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">vclass</span> <span class="o">=</span> <span class="s2">&quot;ui-scrollbar-visible&quot;</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">vclass</span><span class="p">);</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">)</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span><span class="p">.</span><span class="nx">removeClass</span><span class="p">(</span><span class="nx">vclass</span><span class="p">);</span>
	<span class="p">},</span>

	<span class="nx">_addBehaviors</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">eventType</span> <span class="o">===</span> <span class="s2">&quot;mouse&quot;</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStartEvt</span> <span class="o">=</span> <span class="s2">&quot;mousedown&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStartCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragStart</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">);</span> <span class="p">};</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveEvt</span> <span class="o">=</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragMove</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientX</span><span class="p">,</span> <span class="nx">e</span><span class="p">.</span><span class="nx">clientY</span><span class="p">);</span> <span class="p">};</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStopEvt</span> <span class="o">=</span> <span class="s2">&quot;mouseup&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStopCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragStop</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="p">};</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="c1">// &quot;touch&quot;</span>
		<span class="p">{</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStartEvt</span> <span class="o">=</span> <span class="s2">&quot;touchstart&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStartCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
				<span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragStart</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">pageX</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">pageY</span><span class="p">);</span>
			<span class="p">};</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveEvt</span> <span class="o">=</span> <span class="s2">&quot;touchmove&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragMoveCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">e</span><span class="p">.</span><span class="nx">originalEvent</span><span class="p">.</span><span class="nx">targetTouches</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
				<span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragMove</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">pageX</span><span class="p">,</span> <span class="nx">t</span><span class="p">.</span><span class="nx">pageY</span><span class="p">);</span>
			<span class="p">};</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStopEvt</span> <span class="o">=</span> <span class="s2">&quot;touchend&quot;</span><span class="p">;</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_dragStopCB</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">){</span> <span class="k">return</span> <span class="nx">self</span><span class="p">.</span><span class="nx">_handleDragStop</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span> <span class="p">};</span>
		<span class="p">}</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_dragStartEvt</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">_dragStartCB</span><span class="p">);</span>

		<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">showScrollBars</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">$c</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$clip</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">prefix</span> <span class="o">=</span> <span class="s2">&quot;&lt;div class=\&quot;ui-scrollbar ui-scrollbar-&quot;</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">suffix</span> <span class="o">=</span> <span class="s2">&quot;\&quot;&gt;&lt;div class=\&quot;ui-scrollbar-track\&quot;&gt;&lt;div class=\&quot;ui-scrollbar-thumb\&quot;&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&quot;</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_vTracker</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nx">$c</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;y&quot;</span> <span class="o">+</span> <span class="nx">suffix</span><span class="p">);</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_$vScrollBar</span> <span class="o">=</span> <span class="nx">$c</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-y&quot;</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_hTracker</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nx">$c</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">prefix</span> <span class="o">+</span> <span class="s2">&quot;x&quot;</span> <span class="o">+</span> <span class="nx">suffix</span><span class="p">);</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">_$hScrollBar</span> <span class="o">=</span> <span class="nx">$c</span><span class="p">.</span><span class="nx">children</span><span class="p">(</span><span class="s2">&quot;.ui-scrollbar-x&quot;</span><span class="p">);</span>
			<span class="p">}</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">});</span>

<span class="kd">function</span> <span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$ele</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
<span class="p">{</span>
	<span class="kd">var</span> <span class="nx">v</span> <span class="o">=</span> <span class="s2">&quot;translate3d(&quot;</span> <span class="o">+</span> <span class="nx">x</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;, 0px)&quot;</span><span class="p">;</span>
	<span class="nx">$ele</span><span class="p">.</span><span class="nx">css</span><span class="p">({</span>
		<span class="s2">&quot;-moz-transform&quot;</span><span class="o">:</span> <span class="nx">v</span><span class="p">,</span>
		<span class="s2">&quot;-webkit-transform&quot;</span><span class="o">:</span> <span class="nx">v</span><span class="p">,</span>
		<span class="s2">&quot;transform&quot;</span><span class="o">:</span> <span class="nx">v</span>
	<span class="p">});</span>
<span class="p">}</span>


<span class="kd">function</span> <span class="nx">MomentumTracker</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
<span class="p">{</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">options</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">({},</span> <span class="nx">options</span><span class="p">);</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">easing</span> <span class="o">=</span> <span class="s2">&quot;easeOutQuad&quot;</span><span class="p">;</span>
	<span class="k">this</span><span class="p">.</span><span class="nx">reset</span><span class="p">();</span>
<span class="p">}</span>

<span class="kd">var</span> <span class="nx">tstates</span> <span class="o">=</span> <span class="p">{</span>
	<span class="nx">scrolling</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
	<span class="nx">overshot</span><span class="o">:</span>  <span class="mi">1</span><span class="p">,</span>
	<span class="nx">snapback</span><span class="o">:</span>  <span class="mi">2</span><span class="p">,</span>
	<span class="nx">done</span><span class="o">:</span>      <span class="mi">3</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">getCurrentTime</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="p">(</span><span class="k">new</span> <span class="nb">Date</span><span class="p">()).</span><span class="nx">getTime</span><span class="p">();</span> <span class="p">}</span>

<span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">MomentumTracker</span><span class="p">.</span><span class="nx">prototype</span><span class="p">,</span> <span class="p">{</span>
	<span class="nx">start</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">pos</span><span class="p">,</span> <span class="nx">speed</span><span class="p">,</span> <span class="nx">duration</span><span class="p">,</span> <span class="nx">minPos</span><span class="p">,</span> <span class="nx">maxPos</span><span class="p">)</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">(</span><span class="nx">speed</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="nx">pos</span> <span class="o">&lt;</span> <span class="nx">minPos</span> <span class="o">||</span> <span class="nx">pos</span> <span class="o">&gt;</span> <span class="nx">maxPos</span><span class="p">)</span> <span class="o">?</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span> <span class="o">:</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">)</span> <span class="o">:</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="nx">pos</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">=</span> <span class="nx">speed</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">snapbackDuration</span> <span class="o">:</span> <span class="nx">duration</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">=</span> <span class="nx">minPos</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span> <span class="o">=</span> <span class="nx">maxPos</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">fromPos</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">toPos</span> <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span><span class="p">)</span> <span class="o">?</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span><span class="p">)</span> <span class="o">:</span> <span class="mi">0</span><span class="p">;</span>

		<span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>
	<span class="p">},</span>

	<span class="nx">reset</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">update</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span>
	<span class="p">{</span>
		<span class="kd">var</span> <span class="nx">state</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">;</span>
		<span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">)</span>
			<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span>

		<span class="kd">var</span> <span class="nx">duration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">duration</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">elapsed</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">()</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">startTime</span><span class="p">;</span>
		<span class="nx">elapsed</span> <span class="o">=</span> <span class="nx">elapsed</span> <span class="o">&gt;</span> <span class="nx">duration</span> <span class="o">?</span> <span class="nx">duration</span> <span class="o">:</span> <span class="nx">elapsed</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">scrolling</span> <span class="o">||</span> <span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">overshot</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">dx</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">-</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">easing</span><span class="p">](</span><span class="nx">elapsed</span><span class="o">/</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">duration</span><span class="p">));</span>

			<span class="kd">var</span> <span class="nx">x</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">+</span> <span class="nx">dx</span><span class="p">;</span>

			<span class="kd">var</span> <span class="nx">didOverShoot</span> <span class="o">=</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">||</span> <span class="nx">x</span> <span class="o">&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">didOverShoot</span><span class="p">)</span>
				<span class="nx">x</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span><span class="p">;</span>

			<span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="nx">x</span><span class="p">;</span>

			<span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">overshot</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">elapsed</span> <span class="o">&gt;=</span> <span class="nx">duration</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">fromPos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">toPos</span> <span class="o">=</span> <span class="p">(</span><span class="nx">x</span> <span class="o">&lt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span><span class="p">)</span> <span class="o">?</span> <span class="k">this</span><span class="p">.</span><span class="nx">minPos</span> <span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">maxPos</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">snapbackDuration</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>
					<span class="nx">elapsed</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
				<span class="p">}</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">scrolling</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">if</span> <span class="p">(</span><span class="nx">didOverShoot</span><span class="p">)</span>
				<span class="p">{</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">overshot</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">speed</span> <span class="o">=</span> <span class="nx">dx</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">duration</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">options</span><span class="p">.</span><span class="nx">overshootDuration</span><span class="p">;</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">startTime</span> <span class="o">=</span> <span class="nx">getCurrentTime</span><span class="p">();</span>
				<span class="p">}</span>
				<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">elapsed</span> <span class="o">&gt;=</span> <span class="nx">duration</span><span class="p">)</span>
					<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
			<span class="p">}</span>
		<span class="p">}</span>
		<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">snapback</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">elapsed</span> <span class="o">&gt;=</span> <span class="nx">duration</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">toPos</span><span class="p">;</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span>
				<span class="k">this</span><span class="p">.</span><span class="nx">pos</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">fromPos</span> <span class="o">+</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">toPos</span> <span class="o">-</span> <span class="k">this</span><span class="p">.</span><span class="nx">fromPos</span><span class="p">)</span> <span class="o">*</span> <span class="nx">$</span><span class="p">.</span><span class="nx">easing</span><span class="p">[</span><span class="k">this</span><span class="p">.</span><span class="nx">easing</span><span class="p">](</span><span class="nx">elapsed</span><span class="o">/</span><span class="nx">duration</span><span class="p">,</span> <span class="nx">elapsed</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">duration</span><span class="p">));</span>
		<span class="p">}</span>

		<span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">done</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">==</span> <span class="nx">tstates</span><span class="p">.</span><span class="nx">done</span><span class="p">;</span> <span class="p">},</span>
	<span class="nx">getPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(){</span> <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">pos</span><span class="p">;</span> <span class="p">}</span>
<span class="p">});</span>

<span class="nx">jQuery</span><span class="p">.</span><span class="nx">widget</span><span class="p">(</span> <span class="s2">&quot;mobile.scrolllistview&quot;</span><span class="p">,</span> <span class="nx">jQuery</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">scrollview</span><span class="p">,</span> <span class="p">{</span>
	<span class="nx">options</span><span class="o">:</span> <span class="p">{</span>
		<span class="nx">direction</span><span class="o">:</span> <span class="s2">&quot;y&quot;</span>
	<span class="p">},</span>

	<span class="nx">_create</span><span class="o">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
		<span class="nx">$</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">scrollview</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_create</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>Cache the dividers so we don't have to search for them everytime the
view is scrolled.</p>

<p>XXX: Note that we need to update this cache if we ever support lists
     that can dynamically update their content.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">this</span><span class="p">.</span><span class="nx">_$dividers</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;:jqmData(role=&#39;list-divider&#39;)&quot;</span><span class="p">);</span>
		<span class="k">this</span><span class="p">.</span><span class="nx">_lastDivider</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
	<span class="p">},</span>

	<span class="nx">_setScrollPosition</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">)</span>
	<span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Let the view scroll like it normally does.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="nx">$</span><span class="p">.</span><span class="nx">mobile</span><span class="p">.</span><span class="nx">scrollview</span><span class="p">.</span><span class="nx">prototype</span><span class="p">.</span><span class="nx">_setScrollPosition</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="nx">x</span><span class="p">,</span> <span class="nx">y</span><span class="p">);</span>

		<span class="nx">y</span> <span class="o">=</span> <span class="o">-</span><span class="nx">y</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Find the dividers for the list.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="kd">var</span> <span class="nx">$divs</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_$dividers</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">cnt</span> <span class="o">=</span> <span class="nx">$divs</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">d</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">dy</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
		<span class="kd">var</span> <span class="nx">nd</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>

		<span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">cnt</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="nx">nd</span> <span class="o">=</span> <span class="nx">$divs</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">i</span><span class="p">);</span>
			<span class="kd">var</span> <span class="nx">t</span> <span class="o">=</span> <span class="nx">nd</span><span class="p">.</span><span class="nx">offsetTop</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">&gt;=</span> <span class="nx">t</span><span class="p">)</span>
			<span class="p">{</span>
				<span class="nx">d</span> <span class="o">=</span> <span class="nx">nd</span><span class="p">;</span>
				<span class="nx">dy</span> <span class="o">=</span> <span class="nx">t</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span>
				<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>If we found a divider to move position it at the top of the
clip view.</p>             </td>             <td class="code">               <div class="highlight"><pre>		<span class="k">if</span> <span class="p">(</span><span class="nx">d</span><span class="p">)</span>
		<span class="p">{</span>
			<span class="kd">var</span> <span class="nx">h</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">offsetHeight</span><span class="p">;</span>
			<span class="kd">var</span> <span class="nx">mxy</span> <span class="o">=</span> <span class="p">(</span><span class="nx">d</span> <span class="o">!=</span> <span class="nx">nd</span><span class="p">)</span> <span class="o">?</span> <span class="nx">nd</span><span class="p">.</span><span class="nx">offsetTop</span> <span class="o">:</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">_$view</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">offsetHeight</span><span class="p">);</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">y</span> <span class="o">+</span> <span class="nx">h</span> <span class="o">&gt;=</span> <span class="nx">mxy</span><span class="p">)</span>
				<span class="nx">y</span> <span class="o">=</span> <span class="p">(</span><span class="nx">mxy</span> <span class="o">-</span> <span class="nx">h</span><span class="p">)</span> <span class="o">-</span> <span class="nx">dy</span><span class="p">;</span>
			<span class="k">else</span>
				<span class="nx">y</span> <span class="o">=</span> <span class="nx">y</span> <span class="o">-</span> <span class="nx">dy</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>XXX: Need to convert this over to using $().css() and supporting the non-transform case.</p>             </td>             <td class="code">               <div class="highlight"><pre>			<span class="kd">var</span> <span class="nx">ld</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_lastDivider</span><span class="p">;</span>
			<span class="k">if</span> <span class="p">(</span><span class="nx">ld</span> <span class="o">&amp;&amp;</span> <span class="nx">d</span> <span class="o">!=</span> <span class="nx">ld</span><span class="p">)</span> <span class="p">{</span>
				<span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">ld</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
			<span class="p">}</span>
			<span class="nx">setElementTransform</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">d</span><span class="p">),</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">y</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span><span class="p">);</span>
			<span class="k">this</span><span class="p">.</span><span class="nx">_lastDivider</span> <span class="o">=</span> <span class="nx">d</span><span class="p">;</span>

		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>auto-init scrollview and scrolllistview widgets</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">bind</span><span class="p">(</span><span class="s1">&#39;pagecreate create&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$page</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>

    <span class="nx">$page</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s2">&quot;:jqmData(scroll):not(.ui-scrollview-clip)&quot;</span><span class="p">).</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">$this</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

        <span class="k">if</span> <span class="p">(</span><span class="nx">$this</span><span class="p">.</span><span class="nx">hasClass</span><span class="p">(</span><span class="s2">&quot;ui-scrolllistview&quot;</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">$this</span><span class="p">.</span><span class="nx">scrolllistview</span><span class="p">();</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="kd">var</span> <span class="nx">st</span> <span class="o">=</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">jqmData</span><span class="p">(</span><span class="s2">&quot;scroll&quot;</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&quot;</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">paging</span> <span class="o">=</span> <span class="nx">st</span> <span class="o">&amp;&amp;</span> <span class="nx">st</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/^[xy]p$/</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
            <span class="kd">var</span> <span class="nx">dir</span> <span class="o">=</span> <span class="nx">st</span> <span class="o">&amp;&amp;</span> <span class="nx">st</span><span class="p">.</span><span class="nx">search</span><span class="p">(</span><span class="sr">/^[xy]/</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span> <span class="o">?</span> <span class="nx">st</span><span class="p">.</span><span class="nx">charAt</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="kc">null</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">opts</span> <span class="o">=</span> <span class="p">{};</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">dir</span><span class="p">)</span>
                <span class="nx">opts</span><span class="p">.</span><span class="nx">direction</span> <span class="o">=</span> <span class="nx">dir</span><span class="p">;</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">paging</span><span class="p">)</span>
                <span class="nx">opts</span><span class="p">.</span><span class="nx">pagingEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>

            <span class="kd">var</span> <span class="nx">method</span> <span class="o">=</span> <span class="nx">$this</span><span class="p">.</span><span class="nx">jqmData</span><span class="p">(</span><span class="s2">&quot;scroll-method&quot;</span><span class="p">);</span>
            <span class="k">if</span> <span class="p">(</span><span class="nx">method</span><span class="p">)</span>
                <span class="nx">opts</span><span class="p">.</span><span class="nx">scrollMethod</span> <span class="o">=</span> <span class="nx">method</span><span class="p">;</span>

            <span class="nx">$this</span><span class="p">.</span><span class="nx">scrollview</span><span class="p">(</span><span class="nx">opts</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">});</span>
<span class="p">});</span>

<span class="p">})(</span><span class="nx">jQuery</span><span class="p">,</span><span class="nb">window</span><span class="p">,</span><span class="nb">document</span><span class="p">);</span> <span class="c1">// End Component</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 